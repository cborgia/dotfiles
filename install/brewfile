 #!/usr/bin/env bash

# Ask for the administrator password upfront.
sudo -v

# Keep-alive: update existing `sudo` time stamp until the script has finished.
while true; do sudo -n true; sleep 60; kill -0 "$$" || exit; done 2>/dev/null &

# Check for Homebrew and install it if missing
if test ! $(which brew)
then
  echo "Installing Homebrew..."
  /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
fi

brew tap homebrew/versions
brew tap homebrew/dupes
brew tap buo/cask-upgrade
brew tap caskroom/cask
brew tap caskroom/versions

brew update
brew upgrade --all

apps=(
    ansible
    automysqlbackup
    bash
    bash-completion2
    cmatrix
    composer
    coreutils
    dnsmasq
    exa
    ffmpeg
    ffmpeg --with-libvpx
    findutils
    git
    git-extras
    gnu-sed --with-default-names
    grep --with-default-names
    homebrew/php/phplint
    httpie
    hub
    imagemagick --with-webp
    mackup
    mongodb
    moreutils
    mtr
    mysql
    nginx
    nmap
    node
    nvm
    openssh
    openssl
    python
    python3
    reattach-to-user-namespace
    rsync
    screen
    source-highlight
    tmux
    tree
    vim --env-std --override-system-vim --enable-pythoninterp
    wget
    wifi-password
)

brew install "${apps[@]}"

# Remove outdated versions from the cellar
brew cleanup

sudo chown -R `whoami` /usr/local




# List of Apps to install via brew cask
apps=(
    1password
    ableton-live
    adobe-creative-cloud
    airfoil
    alfred
    appcleaner
    atom
    atom-beta
    chronosync
    cyberduck
    dash
    dropbox
    elmedia-player
    firefox
    firefoxnightly
    flux
    google-adwords-editor
    google-chrome
    google-chrome-canary
    google-drive
    google-web-designer
    gyazo
    hermes
    imagealpha
    imageoptim
    iterm2
    java
    kaleidoscope
    macdown
    malwarebytes-anti-malware
    ngrok
    opera
    phpstorm
    screaming-frog-seo-spider
    screenflow
    sequel-pro
    shuttle
    skype
    slack
    sourcetree
    spectacle
    spotify
    sublime-text
    toggldesktop
    torbrowser
    tower
    transmission
    transmit
    utorrent
    vagrant
    validator-sac
    vlc
    webstorm
)

brew cask install "${apps[@]}"

# Quick Look Plugins (https://github.com/sindresorhus/quick-look-plugins)
brew cask install qlcolorcode qlstephen qlmarkdown quicklook-json qlprettypatch quicklook-csv betterzipql qlimagesize webpquicklook suspicious-package

